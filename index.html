<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>SOL Monitor Pro | Análise Técnica em Tempo Real</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========================================
           VARIÁVEIS DE DESIGN PROFISSIONAL
           ======================================== */
        :root {
            /* Cores Principais - Tema Dark Profissional */
            --primary: #6366f1;          /* Índigo */
            --primary-dark: #4f46e5;     /* Índigo escuro */
            --secondary: #8b5cf6;        /* Violeta */
            --accent-bull: #10b981;      /* Verde esmeralda (alta) */
            --accent-bear: #ef4444;      /* Vermelho (baixa) */
            --accent-neutral: #64748b;   /* Cinza azulado (neutro) */
            --background-dark: #0f172a;  /* Azul muito escuro */
            --background-card: #1e293b;  /* Azul acinzentado */
            --background-card-hover: #334155; /* Azul acinzentado mais claro */
            --text-primary: #f8fafc;     /* Branco off */
            --text-secondary: #cbd5e1;   /* Cinza claro */
            --text-tertiary: #94a3b8;    /* Cinza médio */
            --border-color: #334155;     /* Bordas */
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            
            /* Tipografia Premium */
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
            
            /* Espaçamento e Bordas */
            --border-radius-sm: 6px;
            --border-radius-md: 12px;
            --border-radius-lg: 18px;
            --border-radius-xl: 24px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.35);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.45);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.65);
            --transition: all 0.35s cubic-bezier(0.165, 0.84, 0.44, 1);
            
            /* Tamanhos */
            --header-height: 64px;
            --sidebar-width: 280px;
        }
        
        /* ========================================
           RESET E CONFIGURAÇÕES BASE
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: var(--font-sans);
            background: linear-gradient(135deg, var(--background-dark) 0%, #0a0f1d 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-attachment: fixed;
        }
        
        /* ========================================
           LAYOUT GERAL
           ======================================== */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px;
        }
        
        /* ========================================
           HEADER PROFISSIONAL
           ======================================== */
        header {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 0 16px;
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-md);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        .header-title {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .refresh-btn {
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid var(--primary);
            color: var(--primary);
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }
        
        .refresh-btn:hover {
            background: rgba(99, 102, 241, 0.25);
            transform: rotate(90deg);
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }
        
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }
        
        /* ========================================
           PREÇO EM DESTAQUE
           ======================================== */
        .price-section {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: 24px;
            margin: 24px 0;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .price-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            z-index: 0;
        }
        
        .price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
        }
        
        .crypto-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .crypto-icon {
            width: 64px;
            height: 64px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        }
        
        .crypto-details h1 {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 4px;
        }
        
        .crypto-details .symbol {
            color: var(--text-tertiary);
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .price-change {
            padding: 6px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            min-width: 100px;
            text-align: center;
        }
        
        .price-change.bull {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-bull);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .price-change.bear {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-bear);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .current-price {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 16px 0;
            background: linear-gradient(90deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-family: var(--font-mono);
            position: relative;
            z-index: 1;
        }
        
        .price-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 24px;
            position: relative;
            z-index: 1;
        }
        
        .stat-item {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: 16px;
            text-align: center;
            transition: var(--transition);
        }
        
        .stat-item:hover {
            background: rgba(30, 41, 59, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-bottom: 6px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            font-family: var(--font-mono);
        }
        
        /* ========================================
           INDICADORES TÉCNICOS PROFISSIONAIS
           ======================================== */
        .indicators-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 24px 0;
        }
        
        .indicators-card {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: 24px;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }
        
        .indicators-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(99, 102, 241, 0.4);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title i {
            color: var(--primary);
        }
        
        .timeframe-badge {
            background: rgba(99, 102, 241, 0.15);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .indicator-item {
            background: rgba(30, 41, 59, 0.7);
            border-radius: var(--border-radius-md);
            padding: 16px;
            transition: var(--transition);
        }
        
        .indicator-item:hover {
            background: rgba(30, 41, 59, 0.9);
            transform: translateX(4px);
        }
        
        .indicator-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .indicator-name {
            font-weight: 600;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .indicator-name.bull i {
            color: var(--accent-bull);
        }
        
        .indicator-name.bear i {
            color: var(--accent-bear);
        }
        
        .indicator-value {
            font-size: 1.6rem;
            font-weight: 800;
            font-family: var(--font-mono);
            margin: 6px 0;
        }
        
        .indicator-bull {
            color: var(--accent-bull);
        }
        
        .indicator-bear {
            color: var(--accent-bear);
        }
        
        .indicator-neutral {
            color: var(--accent-neutral);
        }
        
        .indicator-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 6px;
        }
        
        .status-bull {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-bull);
        }
        
        .status-bear {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-bear);
        }
        
        .status-neutral {
            background: rgba(100, 116, 139, 0.15);
            color: var(--accent-neutral);
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .analysis-item {
            padding: 14px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: var(--border-radius-md);
            border-left: 3px solid var(--primary);
        }
        
        .analysis-label {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .analysis-value {
            font-size: 1.15rem;
            font-weight: 700;
            font-family: var(--font-mono);
        }
        
        .analysis-bull {
            color: var(--accent-bull);
            border-left-color: var(--accent-bull);
        }
        
        .analysis-bear {
            color: var(--accent-bear);
            border-left-color: var(--accent-bear);
        }
        
        .analysis-neutral {
            color: var(--accent-neutral);
            border-left-color: var(--accent-neutral);
        }
        
        /* ========================================
           GRÁFICO PROFISSIONAL
           ======================================== */
        .chart-section {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: 24px;
            margin: 24px 0;
            box-shadow: var(--shadow-md);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .chart-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .chart-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .timeframe-controls {
            display: flex;
            gap: 8px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 50px;
            padding: 4px;
        }
        
        .timeframe-btn {
            background: transparent;
            border: none;
            color: var(--text-tertiary);
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .timeframe-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
        
        .timeframe-btn:hover:not(.active) {
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .chart-actions {
            display: flex;
            gap: 8px;
        }
        
        .chart-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .chart-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-1px);
        }
        
        .chart-btn.active {
            background: rgba(99, 102, 241, 0.2);
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .chart-container {
            height: 480px;
            position: relative;
            margin-top: 16px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }
        
        /* ========================================
           STATUS BAR E FOOTER
           ======================================== */
        .status-bar {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: 16px;
            margin: 24px 0;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
            font-family: var(--font-mono);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 200px;
        }
        
        .status-label {
            color: var(--text-tertiary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .status-value {
            font-weight: 700;
            font-size: 1.05rem;
        }
        
        .status-success {
            color: var(--success);
        }
        
        .status-error {
            color: var(--danger);
        }
        
        .status-warning {
            color: var(--warning);
        }
        
        footer {
            text-align: center;
            padding: 24px;
            color: var(--text-tertiary);
            font-size: 0.9rem;
            margin-top: 16px;
            border-top: 1px solid var(--border-color);
        }
        
        /* ========================================
           ANIMAÇÕES E ESTADOS DE CARREGAMENTO
           ======================================== */
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: var(--text-tertiary);
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(99, 102, 241, 0.3);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        /* ========================================
           RESPONSIVIDADE PROFISSIONAL
           ======================================== */
        @media (max-width: 1024px) {
            .indicators-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 400px;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --header-height: 56px;
            }
            
            .app-container {
                padding: 12px;
            }
            
            .price-section {
                padding: 20px;
                margin: 16px 0;
            }
            
            .current-price {
                font-size: 2.8rem;
            }
            
            .price-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .indicators-section {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 350px;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 12px;
            }
            
            .status-item {
                min-width: auto;
                justify-content: center;
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .header-title {
                display: none;
            }
            
            .crypto-details h1 {
                font-size: 1.5rem;
            }
            
            .crypto-details .symbol {
                font-size: 0.95rem;
            }
            
            .current-price {
                font-size: 2.3rem;
            }
            
            .price-stats {
                grid-template-columns: 1fr;
            }
            
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .timeframe-controls {
                width: 100%;
                justify-content: center;
            }
            
            .chart-container {
                height: 280px;
            }
            
            .analysis-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ========================================
           UTILITÁRIOS
           ======================================== */
        .hidden {
            display: none !important;
        }
        
        .text-bull {
            color: var(--accent-bull) !important;
        }
        
        .text-bear {
            color: var(--accent-bear) !important;
        }
        
        .text-neutral {
            color: var(--accent-neutral) !important;
        }
        
        .mb-16 {
            margin-bottom: 16px;
        }
        
        .mb-24 {
            margin-bottom: 24px;
        }
        
        .mt-16 {
            margin-top: 16px;
        }
        
        .mt-24 {
            margin-top: 24px;
        }
        
        .d-flex {
            display: flex !important;
        }
        
        .align-items-center {
            align-items: center !important;
        }
        
        .justify-content-between {
            justify-content: space-between !important;
        }
        
        .gap-8 {
            gap: 8px !important;
        }
        
        .gap-12 {
            gap: 12px !important;
        }
        
        .gap-16 {
            gap: 16px !important;
        }
        
        .text-center {
            text-align: center !important;
        }
        
        .text-lg {
            font-size: 1.125rem !important;
        }
        
        .font-bold {
            font-weight: 700 !important;
        }
        
        .font-semibold {
            font-weight: 600 !important;
        }
        
        .font-medium {
            font-weight: 500 !important;
        }
        
        /* ========================================
           BOTÕES DE AÇÃO
           ======================================== */
        .action-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.45);
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(99, 102, 241, 0.6);
        }
        
        .action-btn:active {
            transform: translateY(1px);
        }
        
        /* ========================================
           NOTIFICAÇÕES
           ======================================== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: var(--border-radius-md);
            background: var(--background-card);
            border-left: 4px solid var(--primary);
            box-shadow: var(--shadow-lg);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            transition: transform 0.3s ease-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left-color: var(--success);
        }
        
        .notification.error {
            border-left-color: var(--danger);
        }
        
        .notification i {
            font-size: 1.4rem;
        }
        
        .notification.success i {
            color: var(--success);
        }
        
        .notification.error i {
            color: var(--danger);
        }
        
        /* ========================================
           PAINEL DE MACD 5M
           ======================================== */
        .macd-5m-section {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: 24px;
            margin: 24px 0;
            box-shadow: var(--shadow-md);
        }
        
        .macd-5m-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .macd-5m-analysis {
            background: rgba(30, 41, 59, 0.7);
            border-radius: var(--border-radius-md);
            padding: 20px;
            border-left: 3px solid var(--primary);
        }
        
        .analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .analysis-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .analysis-title i {
            color: var(--primary);
        }
        
        .analysis-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .analysis-box {
            background: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius-md);
            padding: 16px;
        }
        
        .analysis-box-title {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .analysis-box-value {
            font-size: 1.3rem;
            font-weight: 700;
            font-family: var(--font-mono);
        }
        
        .analysis-box-value.bull {
            color: var(--accent-bull);
        }
        
        .analysis-box-value.bear {
            color: var(--accent-bear);
        }
        
        .analysis-box-value.neutral {
            color: var(--accent-neutral);
        }
        
        .analysis-box-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .analysis-box-status.bull {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-bull);
        }
        
        .analysis-box-status.bear {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-bear);
        }
        
        .analysis-box-status.neutral {
            background: rgba(100, 116, 139, 0.15);
            color: var(--accent-neutral);
        }
        
        .macd-impact {
            background: rgba(30, 41, 59, 0.7);
            border-radius: var(--border-radius-md);
            padding: 16px;
            margin-top: 20px;
            border-left: 3px solid var(--accent-bull);
        }
        
        .macd-impact-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .macd-impact-title i {
            color: var(--accent-bull);
        }
        
        .impact-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }
        
        .impact-box {
            background: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius-md);
            padding: 16px;
        }
        
        .impact-box-title {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .impact-box-value {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .impact-box-value.bull {
            color: var(--accent-bull);
        }
        
        .impact-box-value.bear {
            color: var(--accent-bear);
        }
        
        .impact-box-value.neutral {
            color: var(--accent-neutral);
        }
        
        .impact-box-description {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-top: 8px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header Profissional -->
        <header>
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-chart-line logo-icon"></i>
                    <span>SOL Monitor Pro</span>
                </div>
                <div class="header-title">Análise Técnica em Tempo Real</div>
            </div>
            <div class="header-actions">
                <button class="refresh-btn" id="refreshBtn" title="Atualizar dados">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="theme-toggle" id="themeToggle" title="Alternar tema">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Preço em Destaque -->
        <section class="price-section">
            <div class="price-header">
                <div class="crypto-info">
                    <div class="crypto-icon">
                        <i class="fas fa-sun"></i>
                    </div>
                    <div class="crypto-details">
                        <h1>Solana (SOL)</h1>
                        <div class="symbol">SOL/USDT</div>
                    </div>
                </div>
                <div class="price-change bull" id="priceChangeBadge">
                    <span id="priceChange">Carregando...</span>
                </div>
            </div>
            <div class="current-price" id="currentPrice">Carregando...</div>
            <div class="price-stats">
                <div class="stat-item">
                    <div class="stat-label">24h High</div>
                    <div class="stat-value" id="high24h">-</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">24h Low</div>
                    <div class="stat-value" id="low24h">-</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Volume 24h</div>
                    <div class="stat-value" id="volume24h">-</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Market Cap</div>
                    <div class="stat-value" id="marketCap">-</div>
                </div>
            </div>
        </section>

        <!-- Indicadores Técnicos Profissionais -->
        <section class="indicators-section">
            <!-- MACD -->
            <div class="indicators-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-chart-area"></i> MACD
                    </h2>
                    <div class="timeframe-badge">15m</div>
                </div>
                <div class="indicators-grid">
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name bull">
                                <i class="fas fa-arrow-trend-up"></i> MACD
                            </div>
                        </div>
                        <div class="indicator-value indicator-bull" id="macdValue">Carregando...</div>
                        <div class="indicator-status status-bull" id="macdStatus">Carregando...</div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name">
                                <i class="fas fa-minus"></i> Signal
                            </div>
                        </div>
                        <div class="indicator-value" id="macdSignal">Carregando...</div>
                        <div class="indicator-status status-neutral" id="macdSignalStatus">Carregando...</div>
                    </div>
                </div>
                <div class="analysis-grid mt-16">
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-chart-line"></i> Tendência
                        </div>
                        <div class="analysis-value" id="macdTrend">Carregando...</div>
                    </div>
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-gauge-high"></i> Momentum
                        </div>
                        <div class="analysis-value" id="macdMomentum">Carregando...</div>
                    </div>
                </div>
            </div>

            <!-- EMAs -->
            <div class="indicators-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-chart-line"></i> Médias Móveis
                    </h2>
                    <div class="timeframe-badge">15m</div>
                </div>
                <div class="indicators-grid">
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name bull">
                                <i class="fas fa-arrow-trend-up"></i> EMA 6
                            </div>
                            <div class="indicator-status status-bull" id="ema6Status">Carregando...</div>
                        </div>
                        <div class="indicator-value indicator-bull" id="ema6Value">Carregando...</div>
                        <div class="indicator-trend" id="ema6Trend">Carregando...</div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name">
                                <i class="fas fa-chart-line"></i> EMA 25
                            </div>
                            <div class="indicator-status status-neutral" id="ema25Status">Carregando...</div>
                        </div>
                        <div class="indicator-value" id="ema25Value">Carregando...</div>
                        <div class="indicator-trend" id="ema25Trend">Carregando...</div>
                    </div>
                </div>
                <div class="analysis-grid mt-16">
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-arrow-up-right-dots"></i> Cruzamento
                        </div>
                        <div class="analysis-value" id="emaCross">Carregando...</div>
                    </div>
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-route"></i> Canal de Tendência
                        </div>
                        <div class="analysis-value" id="ema6BbChannel">Carregando...</div>
                    </div>
                </div>
            </div>

            <!-- Bollinger Bands -->
            <div class="indicators-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-chart-candlestick"></i> Bollinger Bands
                    </h2>
                    <div class="timeframe-badge">20,2</div>
                </div>
                <div class="indicators-grid">
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name">
                                <i class="fas fa-expand"></i> Largura
                            </div>
                            <div class="indicator-status status-bull" id="bbStatus">Carregando...</div>
                        </div>
                        <div class="indicator-value" id="bbWidth">Carregando...</div>
                        <div class="indicator-trend">Carregando...</div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-header">
                            <div class="indicator-name bull">
                                <i class="fas fa-arrow-up"></i> Posição
                            </div>
                        </div>
                        <div class="indicator-value indicator-bull" id="bbPosition">Carregando...</div>
                        <div class="indicator-trend">Carregando...</div>
                    </div>
                </div>
                <div class="analysis-grid mt-16">
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-wave-square"></i> Volatilidade
                        </div>
                        <div class="analysis-value" id="volatility">Carregando...</div>
                    </div>
                    <div class="analysis-item analysis-bull">
                        <div class="analysis-label">
                            <i class="fas fa-arrow-trend-up"></i> Tendência
                        </div>
                        <div class="analysis-value">Carregando...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gráfico Profissional -->
        <section class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title" id="chartTitle">Gráfico de Preços - Últimos 15 Minutos</h2>
                <div class="chart-controls">
                    <div class="timeframe-controls">
                        <button class="timeframe-btn active" data-timeframe="15m">15m</button>
                        <button class="timeframe-btn" data-timeframe="4h">4h</button>
                        <button class="timeframe-btn" data-timeframe="24h">24h</button>
                        <button class="timeframe-btn" data-timeframe="7d">7d</button>
                    </div>
                    <div class="chart-actions">
                        <button class="chart-btn active" id="toggleIndicators">
                            <i class="fas fa-chart-line"></i> Indicadores
                        </button>
                        <button class="chart-btn">
                            <i class="fas fa-expand"></i> Tela Cheia
                        </button>
                    </div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="priceChart"></canvas>
            </div>
        </section>

        <!-- PAINEL MACD 5M -->
        <section class="macd-5m-section">
            <div class="macd-5m-title">
                <h2 class="analysis-title">
                    <i class="fas fa-chart-area"></i> Análise MACD 5m vs 15m
                </h2>
                <div class="timeframe-badge">5m</div>
            </div>
            
            <div class="macd-5m-analysis">
                <div class="analysis-header">
                    <h3 class="analysis-title">
                        <i class="fas fa-chart-line"></i> Dados do MACD 5m
                    </h3>
                </div>
                
                <div class="analysis-content">
                    <div class="analysis-box">
                        <div class="analysis-box-title">
                            <i class="fas fa-chart-line"></i> MACD
                        </div>
                        <div class="analysis-box-value bull" id="macd5mValue">Carregando...</div>
                        <div class="analysis-box-status bull" id="macd5mStatus">Carregando...</div>
                    </div>
                    
                    <div class="analysis-box">
                        <div class="analysis-box-title">
                            <i class="fas fa-minus"></i> Signal
                        </div>
                        <div class="analysis-box-value" id="macd5mSignal">Carregando...</div>
                        <div class="analysis-box-status neutral" id="macd5mSignalStatus">Carregando...</div>
                    </div>
                    
                    <div class="analysis-box">
                        <div class="analysis-box-title">
                            <i class="fas fa-gauge-high"></i> Momentum
                        </div>
                        <div class="analysis-box-value bull" id="macd5mMomentum">Carregando...</div>
                        <div class="analysis-box-status bull">Carregando...</div>
                    </div>
                    
                    <div class="analysis-box">
                        <div class="analysis-box-title">
                            <i class="fas fa-bolt"></i> Velocidade
                        </div>
                        <div class="analysis-box-value bull" id="macd5mVelocity">Carregando...</div>
                        <div class="analysis-box-status bull">Carregando...</div>
                    </div>
                </div>
                
                <div class="macd-impact">
                    <h3 class="macd-impact-title">
                        <i class="fas fa-sync-alt"></i> Impacto no MACD 15m
                    </h3>
                    
                    <div class="impact-details">
                        <div class="impact-box">
                            <div class="impact-box-title">
                                <i class="fas fa-chart-line"></i> Probabilidade de Mudança
                            </div>
                            <div class="impact-box-value bull" id="macdImpactProbability">Carregando...</div>
                            <div class="impact-box-description">
                                Baseado na força do momentum e na consistência do sinal
                            </div>
                        </div>
                        
                        <div class="impact-box">
                            <div class="impact-box-title">
                                <i class="fas fa-cube"></i> Tipo de Movimento
                            </div>
                            <div class="impact-box-value bull" id="macdImpactType">Carregando...</div>
                            <div class="impact-box-description">
                                O MACD 5m está mostrando uma tendência forte e consistente
                            </div>
                        </div>
                        
                        <div class="impact-box">
                            <div class="impact-box-title">
                                <i class="fas fa-hourglass-half"></i> Tempo Estimado
                            </div>
                            <div class="impact-box-value bull" id="macdImpactTime">Carregando...</div>
                            <div class="impact-box-description">
                                Mudança provável no próximo ciclo de 15 minutos
                            </div>
                        </div>
                        
                        <div class="impact-box">
                            <div class="impact-box-title">
                                <i class="fas fa-exclamation-triangle"></i> Risco
                            </div>
                            <div class="impact-box-value neutral" id="macdImpactRisk">Carregando...</div>
                            <div class="impact-box-description">
                                Baixo risco de reversão, a tendência é consistente
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <div class="status-label">Status API:</div>
                <div class="status-value status-success" id="apiStatus">Carregando...</div>
            </div>
            <div class="status-item">
                <div class="status-label">Última Atualização:</div>
                <div class="status-value" id="lastUpdate">-</div>
            </div>
            <div class="status-item">
                <div class="status-label">Próxima Atualização:</div>
                <div class="status-value">30 segundos</div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>Dados fornecidos por CoinGecko API via Proxy | Atualização automática a cada 30 segundos | Indicadores Técnicos Calculados Localmente</p>
            <p class="mt-8">© 2026 SOL Monitor Pro - Ferramenta de Análise Técnica para Traders Profissionais</p>
        </footer>
    </div>

    <!-- Bibliotecas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/trading-signals@5/dist/umd/index.min.js"></script>
    
    <!-- App Principal -->
    <script>
        // Classe para cálculo de indicadores técnicos
        class TechnicalIndicators {
            constructor(prices) {
                this.prices = prices;
                this.ema6 = null;
                this.ema25 = null;
                this.macd = null;
                this.bbands = null;
                this.ema6History = [];
                this.ema25History = [];
                this.macdHistory = [];
                this.bbandsHistory = [];
            }

            calculateAll() {
                if (this.prices.length < 30) return null;

                const closePrices = this.prices.map(p => p.price);
                const { EMA, MACD, BollingerBands } = window.tradingSignals;

                // Calcular EMA 6
                this.ema6 = new EMA(6);
                this.ema6History = closePrices.map(price => this.ema6.update(price));

                // Calcular EMA 25
                this.ema25 = new EMA(25);
                this.ema25History = closePrices.map(price => this.ema25.update(price));

                // Calcular MACD (12, 26, 9)
                this.macd = new MACD(12, 26, 9);
                this.macdHistory = closePrices.map(price => this.macd.update(price));

                // Calcular Bollinger Bands (20, 2)
                this.bbands = new BollingerBands(20, 2);
                this.bbandsHistory = closePrices.map(price => this.bbands.update(price));

                return {
                    ema6: this.ema6History,
                    ema25: this.ema25History,
                    macd: this.macdHistory,
                    bbands: this.bbandsHistory,
                    closePrices
                };
            }

            // Função específica para calcular MACD 5m com base em dados mais frequentes
            // Como só temos dados a cada 5min, vamos calcular o MACD 5m com os mesmos dados
            // e analisar a diferença com o MACD 15m para a análise de impacto
            calculateMACD5m(closePrices) {
                 // Calcular MACD (5, 35, 5) - Parâmetros mais sensíveis para 5min
                const macd5m = new window.tradingSignals.MACD(5, 35, 5);
                const macd5mHistory = closePrices.map(price => macd5m.update(price));
                
                if (macd5mHistory.length === 0) return null;
                
                const result = macd5m.result;
                if (!result) return null;

                const macdLine = result.macd;
                const signalLine = result.signal;
                const histogram = macdLine - signalLine;

                let status = 'NEUTRAL';
                if (macdLine > signalLine && histogram > 0) {
                    status = 'BULL';
                } else if (macdLine < signalLine && histogram < 0) {
                    status = 'BEAR';
                }

                return {
                    status,
                    value: macdLine,
                    signal: signalLine,
                    histogram,
                    momentum: Math.abs(histogram) > 0.01 ? 'Forte' : 'Fraco', // Simplificação
                    velocity: Math.abs(macdLine - signalLine) > 0.02 ? 'Rápido' : 'Lento' // Simplificação
                };
            }


            analyzeMACD() {
                if (!this.macd || !this.macd.result) return { status: 'NEUTRAL', value: 0, signal: 0, momentum: 'Neutro' };

                const macdLine = this.macd.result.macd;
                const signalLine = this.macd.result.signal;
                const histogram = macdLine - signalLine;

                let status = 'NEUTRAL';
                if (macdLine > signalLine && histogram > 0) {
                    status = 'BULL';
                } else if (macdLine < signalLine && histogram < 0) {
                    status = 'BEAR';
                }

                return {
                    status,
                    value: macdLine,
                    signal: signalLine,
                    histogram,
                    momentum: Math.abs(histogram) > 0.01 ? 'Forte' : 'Fraco' // Simplificação
                };
            }

            analyzeEMA() {
                if (!this.ema6 || !this.ema25) return { trend: 'NEUTRAL', strength: 0 };

                const ema6Value = this.ema6.result;
                const ema25Value = this.ema25.result;

                let trend = 'NEUTRAL';
                let strength = 0;

                if (ema6Value > ema25Value) {
                    trend = 'BULL';
                    strength = ((ema6Value - ema25Value) / ema25Value) * 100;
                } else if (ema6Value < ema25Value) {
                    trend = 'BEAR';
                    strength = ((ema25Value - ema6Value) / ema25Value) * 100;
                }

                return {
                    trend,
                    strength,
                    ema6: ema6Value,
                    ema25: ema25Value
                };
            }

            analyzeBollingerBands() {
                if (!this.bbands || !this.bbands.result || !this.ema6) return {
                    status: 'NEUTRAL',
                    width: 0,
                    position: 'NEUTRAL'
                };

                const currentPrice = this.prices[this.prices.length - 1].price;
                const bb = this.bbands.result;
                const ema6Value = this.ema6.result;

                // Calcular largura da banda (volatilidade)
                const width = ((bb.upper - bb.lower) / bb.middle) * 100;
                let status = 'NEUTRAL';

                if (width > 8) {
                    status = 'EXPANSÃO';
                } else if (width < 4) {
                    status = 'RETRAÇÃO';
                }

                // Posição do preço em relação à linha média
                let position = 'NEUTRAL';
                if (currentPrice > bb.middle) {
                    position = 'ACIMA';
                } else if (currentPrice < bb.middle) {
                    position = 'ABAIXO';
                }

                // Verificar se EMA6 está paralela a uma das bandas
                const upperDistance = Math.abs(ema6Value - bb.upper);
                const lowerDistance = Math.abs(ema6Value - bb.lower);
                const middleDistance = Math.abs(ema6Value - bb.middle);

                let channelType = 'NEUTRAL';
                if (upperDistance < middleDistance && upperDistance < lowerDistance) {
                    channelType = 'CANAL SUPERIOR';
                } else if (lowerDistance < middleDistance && lowerDistance < upperDistance) {
                    channelType = 'CANAL INFERIOR';
                }

                return {
                    status,
                    width,
                    position,
                    channelType,
                    upper: bb.upper,
                    middle: bb.middle,
                    lower: bb.lower,
                    currentPrice
                };
            }

            detectEMACross() {
                if (this.ema6History.length < 2 || this.ema25History.length < 2) return 'NEUTRAL';

                const prevEMA6 = this.ema6History[this.ema6History.length - 2];
                const prevEMA25 = this.ema25History[this.ema25History.length - 2];
                const currentEMA6 = this.ema6History[this.ema6History.length - 1];
                const currentEMA25 = this.ema25History[this.ema25History.length - 1];

                // Cruzamento de baixa para cima (Golden Cross)
                if (prevEMA6 <= prevEMA25 && currentEMA6 > currentEMA25) {
                    return 'GOLDEN_CROSS';
                }

                // Cruzamento de cima para baixo (Death Cross)
                if (prevEMA6 >= prevEMA25 && currentEMA6 < currentEMA25) {
                    return 'DEATH_CROSS';
                }

                return 'NEUTRAL';
            }
            
            // Função para analisar o impacto do MACD 5m no 15m
            analyzeMACDImpact(macd5m, macd15m) {
                if (!macd5m || !macd15m) return {
                    probability: 0,
                    movementType: 'Neutro',
                    timeEstimate: 'Indefinido',
                    risk: 'Neutro'
                };

                // Simples comparação de força e divergência
                const momentumStrength = macd5m.momentum === 'Forte' ? 1 : 0;
                const trendAlignment = macd5m.status === macd15m.status ? 1 : 0;
                
                // Quão distante está o MACD 5m do 15m
                const divergence = Math.abs(macd5m.value - macd15m.value);
                
                // Calcular probabilidade baseada nesses fatores
                let probability = 0;
                if (momentumStrength && trendAlignment && divergence > 0.02) {
                    probability = 75; // Alta probabilidade se forte e alinhado com divergência
                } else if (momentumStrength && trendAlignment) {
                    probability = 50; // Média se forte e alinhado
                } else if (momentumStrength) {
                    probability = 30; // Baixa se forte mas não alinhado
                } else {
                    probability = 10; // Muito baixa se fraco
                }

                // Tipo de movimento
                let movementType = 'Consolidação';
                if (probability > 60) {
                    movementType = macd5m.status === 'BULL' ? 'Tendência de Alta' : 'Tendência de Queda';
                } else if (probability > 30) {
                    movementType = 'Pullback Momentâneo';
                }

                // Tempo estimado (simplificado)
                const timeEstimate = probability > 70 ? '1-2 candles (5-10m)' : probability > 50 ? '2-3 candles (10-15m)' : 'Mais de 3 candles (15m+)';

                // Risco (simplificado)
                const risk = probability > 60 ? 'Baixo' : probability > 30 ? 'Médio' : 'Alto';

                return {
                    probability: Math.min(probability, 100), // Limite a 100%
                    movementType,
                    timeEstimate,
                    risk
                };
            }
        }

        // Classe principal do aplicativo
        class SolanaMonitor {
            constructor() {
                this.coinId = 'solana';
                this.apiBaseUrl = 'https://api.coingecko.com/api/v3';
                this.priceHistory = {};
                this.currentTimeframe = '15m';
                this.updateInterval = 30000; // 30 segundos
                this.chart = null;
                this.showIndicators = true;
                this.timeframeConfig = {
                    '15m': { days: 1, interval: '5min', label: '15 Minutos', timeUnit: 'minute' },
                    '4h': { days: 1, interval: '30min', label: '4 Horas', timeUnit: 'hour' },
                    '24h': { days: 1, interval: 'hourly', label: '24 Horas', timeUnit: 'hour' },
                    '7d': { days: 7, interval: 'daily', label: '7 Dias', timeUnit: 'day' }
                };
                
                // Proxy CORS para contornar problemas de acesso direto à API
                this.proxyUrl = 'https://api.allorigins.win/raw?url='; 
                
                this.init();
            }

            async init() {
                try {
                    this.updateStatus('Conectando...', 'loading');
                    await this.fetchInitialData();
                    this.setupChart();
                    this.setupEventListeners();
                    this.startAutoUpdate();
                    this.updateStatus('Conectado', 'success');
                    this.showNotification('Dados carregados com sucesso!', 'success');
                } catch (error) {
                    console.error('Erro durante inicialização:', error);
                    this.updateStatus(`Erro: ${error.message}`, 'error');
                    this.showNotification(`Erro: ${error.message}`, 'error');
                }
            }

            async fetchInitialData() {
                // Buscar dados principais
                await this.fetchPriceData();
                
                // Buscar dados históricos para todos os timeframes
                for (const timeframe of Object.keys(this.timeframeConfig)) {
                    await this.fetchHistoricalData(timeframe);
                }
                
                // Calcular indicadores para o timeframe atual
                if (this.priceHistory[this.currentTimeframe]) {
                    this.calculateAndDisplayIndicators();
                }
            }

            async fetchPriceData() {
                const url = `${this.proxyUrl}${this.apiBaseUrl}/coins/${this.coinId}`;
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`API retornou status ${response.status}`);
                }
                
                const data = await response.json();
                
                // Atualizar UI com dados reais
                this.currentPrice = data.market_data.current_price.usd;
                this.priceChange = data.market_data.price_change_percentage_24h;
                this.high24h = data.market_data.high_24h.usd;
                this.low24h = data.market_data.low_24h.usd;
                this.volume24h = data.market_data.total_volume.usd;
                this.marketCap = data.market_data.market_cap.usd;
                
                this.updateMainPriceUI();
            }

            async fetchHistoricalData(timeframe) {
                const config = this.timeframeConfig[timeframe];
                const url = `${this.proxyUrl}${this.apiBaseUrl}/coins/${this.coinId}/market_chart?vs_currency=usd&days=${config.days}&interval=${config.interval}`;
                
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`API retornou status ${response.status} para timeframe ${timeframe}`);
                }
                
                const data = await response.json();
                
                // Converter dados para o formato esperado
                this.priceHistory[timeframe] = data.prices.map(([timestamp, price]) => ({
                    timestamp: new Date(timestamp),
                    price: price
                }));
                
                // Se for o timeframe atual, atualizar o gráfico
                if (timeframe === this.currentTimeframe) {
                    this.updateChart();
                }
            }

            updateMainPriceUI() {
                if (typeof this.currentPrice === 'undefined') return;
                
                document.getElementById('currentPrice').textContent = `$${this.currentPrice.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                
                const priceChangeEl = document.getElementById('priceChange');
                const priceChangeBadge = document.getElementById('priceChangeBadge');
                priceChangeEl.textContent = `${this.priceChange > 0 ? '+' : ''}${this.priceChange.toFixed(2)}%`;
                priceChangeBadge.className = `price-change ${this.priceChange >= 0 ? 'bull' : 'bear'}`;
                
                document.getElementById('high24h').textContent = `$${this.high24h.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                document.getElementById('low24h').textContent = `$${this.low24h.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                document.getElementById('volume24h').textContent = `$${this.formatLargeNumber(this.volume24h)}`;
                document.getElementById('marketCap').textContent = `$${this.formatLargeNumber(this.marketCap)}`;
                
                document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('pt-BR');
            }

            calculateAndDisplayIndicators() {
                if (!this.priceHistory[this.currentTimeframe] || this.priceHistory[this.currentTimeframe].length < 30) {
                    console.warn(`Não há dados suficientes para calcular indicadores para ${this.currentTimeframe}`);
                    return;
                }

                const indicators = new TechnicalIndicators(this.priceHistory[this.currentTimeframe]);
                const calculations = indicators.calculateAll();

                if (!calculations) return;

                // Analisar MACD 15m
                const macdAnalysis = indicators.analyzeMACD();
                this.updateMACDIndicator(macdAnalysis);

                // Analisar EMA
                const emaAnalysis = indicators.analyzeEMA();
                this.updateEMAIndicators(emaAnalysis);

                // Analisar Bollinger Bands
                const bbAnalysis = indicators.analyzeBollingerBands();
                this.updateBBIndicators(bbAnalysis);

                // Detectar cruzamentos
                const crossType = indicators.detectEMACross();
                this.updateCrossIndicator(crossType);

                // Calcular MACD 5m com base nos mesmos dados (simplificação)
                const closePrices = this.priceHistory[this.currentTimeframe].map(p => p.price);
                const macd5m = indicators.calculateMACD5m(closePrices);
                
                if (macd5m) {
                    this.updateMACD5mIndicator(macd5m);
                    
                    // Analisar impacto do MACD 5m no 15m
                    const impactAnalysis = indicators.analyzeMACDImpact(macd5m, macdAnalysis);
                    this.updateMACDImpactIndicator(impactAnalysis);
                }
            }

            updateMACDIndicator(macd) {
                document.getElementById('macdValue').textContent = macd.value.toFixed(4);
                document.getElementById('macdSignal').textContent = macd.signal.toFixed(4);
                document.getElementById('macdStatus').textContent = macd.status;
                document.getElementById('macdTrend').textContent = macd.status;
                document.getElementById('macdMomentum').textContent = macd.momentum;
                
                // Atualizar classes de status
                const statusEl = document.getElementById('macdStatus');
                const trendEl = document.getElementById('macdTrend');
                statusEl.className = 'indicator-status';
                trendEl.className = 'analysis-value';
                
                if (macd.status === 'BULL') {
                    statusEl.classList.add('status-bull');
                    trendEl.classList.add('analysis-bull');
                } else if (macd.status === 'BEAR') {
                    statusEl.classList.add('status-bear');
                    trendEl.classList.add('analysis-bear');
                } else {
                    statusEl.classList.add('status-neutral');
                    trendEl.classList.add('analysis-neutral');
                }
                
                // Atualizar Signal status
                const signalStatusEl = document.getElementById('macdSignalStatus');
                signalStatusEl.textContent = macd.status;
                signalStatusEl.className = 'indicator-status';
                if (macd.status === 'BULL') signalStatusEl.classList.add('status-bull');
                else if (macd.status === 'BEAR') signalStatusEl.classList.add('status-bear');
                else signalStatusEl.classList.add('status-neutral');
            }
            
            updateMACD5mIndicator(macd5m) {
                document.getElementById('macd5mValue').textContent = macd5m.value.toFixed(4);
                document.getElementById('macd5mSignal').textContent = macd5m.signal.toFixed(4);
                document.getElementById('macd5mStatus').textContent = macd5m.status;
                document.getElementById('macd5mMomentum').textContent = macd5m.momentum;
                document.getElementById('macd5mVelocity').textContent = macd5m.velocity;
                
                // Atualizar classes de status
                const statusEl = document.getElementById('macd5mStatus');
                statusEl.className = 'analysis-box-status';
                if (macd5m.status === 'BULL') statusEl.classList.add('bull');
                else if (macd5m.status === 'BEAR') statusEl.classList.add('bear');
                else statusEl.classList.add('neutral');
                
                const signalStatusEl = document.getElementById('macd5mSignalStatus');
                signalStatusEl.className = 'analysis-box-status';
                if (macd5m.status === 'BULL') signalStatusEl.classList.add('bull');
                else if (macd5m.status === 'BEAR') signalStatusEl.classList.add('bear');
                else signalStatusEl.classList.add('neutral');
            }
            
            updateMACDImpactIndicator(impact) {
                document.getElementById('macdImpactProbability').textContent = `${impact.probability}%`;
                document.getElementById('macdImpactType').textContent = impact.movementType;
                document.getElementById('macdImpactTime').textContent = impact.timeEstimate;
                document.getElementById('macdImpactRisk').textContent = impact.risk;
                
                // Atualizar classes de status
                const probEl = document.getElementById('macdImpactProbability');
                probEl.className = 'impact-box-value';
                if (impact.probability > 60) probEl.classList.add('bull');
                else if (impact.probability < 30) probEl.classList.add('bear');
                else probEl.classList.add('neutral');
                
                const typeEl = document.getElementById('macdImpactType');
                typeEl.className = 'impact-box-value';
                if (impact.movementType.includes('Tendência')) typeEl.classList.add('bull');
                else if (impact.movementType.includes('Queda')) typeEl.classList.add('bear');
                else typeEl.classList.add('neutral');
                
                const riskEl = document.getElementById('macdImpactRisk');
                riskEl.className = 'impact-box-value';
                if (impact.risk === 'Baixo') riskEl.classList.add('bull');
                else if (impact.risk === 'Alto') riskEl.classList.add('bear');
                else riskEl.classList.add('neutral');
            }

            updateEMAIndicators(ema) {
                document.getElementById('ema6Value').textContent = `$${ema.ema6.toFixed(2)}`;
                document.getElementById('ema25Value').textContent = `$${ema.ema25.toFixed(2)}`;
                document.getElementById('ema6Trend').textContent = `${ema.trend} (${ema.strength.toFixed(2)}%)`;
                document.getElementById('ema25Trend').textContent = ema.trend; // Simplificação
                
                const ema6StatusEl = document.getElementById('ema6Status');
                const ema25StatusEl = document.getElementById('ema25Status');
                
                ema6StatusEl.textContent = ema.trend;
                ema25StatusEl.textContent = ema.trend;
                
                // Atualizar classes de status
                ema6StatusEl.className = 'indicator-status';
                ema25StatusEl.className = 'indicator-status';
                
                if (ema.trend === 'BULL') {
                    ema6StatusEl.classList.add('status-bull');
                    ema25StatusEl.classList.add('status-bull');
                } else if (ema.trend === 'BEAR') {
                    ema6StatusEl.classList.add('status-bear');
                    ema25StatusEl.classList.add('status-bear');
                } else {
                    ema6StatusEl.classList.add('status-neutral');
                    ema25StatusEl.classList.add('status-neutral');
                }
            }

            updateBBIndicators(bb) {
                document.getElementById('bbWidth').textContent = `${bb.width.toFixed(2)}%`;
                document.getElementById('bbStatus').textContent = bb.status;
                document.getElementById('bbPosition').textContent = bb.position;
                
                const bbStatusEl = document.getElementById('bbStatus');
                const bbPositionEl = document.getElementById('bbPosition');
                
                // Atualizar classes de status
                bbStatusEl.className = 'indicator-status';
                bbPositionEl.className = 'indicator-value';
                
                if (bb.status === 'EXPANSÃO') bbStatusEl.classList.add('status-bull');
                else if (bb.status === 'RETRAÇÃO') bbStatusEl.classList.add('status-bear');
                else bbStatusEl.classList.add('status-neutral');
                
                if (bb.position === 'ACIMA') bbPositionEl.classList.add('indicator-bull');
                else if (bb.position === 'ABAIXO') bbPositionEl.classList.add('indicator-bear');
                else bbPositionEl.classList.add('indicator-neutral');
                
                // Volatilidade
                document.getElementById('volatility').textContent = `${bb.status} (${bb.width.toFixed(1)}%)`;
            }

            updateCrossIndicator(crossType) {
                document.getElementById('emaCross').textContent = crossType === 'GOLDEN_CROSS' ? 'Golden Cross' : 
                                     crossType === 'DEATH_CROSS' ? 'Death Cross' : 'Neutro';
                
                const crossEl = document.getElementById('emaCross');
                crossEl.className = 'analysis-value';
                
                if (crossType === 'GOLDEN_CROSS') crossEl.classList.add('analysis-bull');
                else if (crossType === 'DEATH_CROSS') crossEl.classList.add('analysis-bear');
                else crossEl.classList.add('analysis-neutral');
            }

            setupChart() {
                const ctx = document.getElementById('priceChart').getContext('2d');
                
                // Inicializar com dados vazios
                this.chart = new Chart(ctx, {
                    type: 'line',
                     {
                        labels: [],
                        datasets: [
                            {
                                label: 'Preço SOL',
                                 [],
                                borderColor: '#6366f1',
                                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                                borderWidth: 3,
                                pointRadius: 0,
                                fill: true,
                                tension: 0.4,
                                segment: {
                                    borderColor: ctx => {
                                        const index = ctx.p0DataIndex;
                                        // Retorna cor baseada na direção do preço (implementação simplificada)
                                        // Precisaremos atualizar isso quando tivermos dados reais
                                        return 'rgba(99, 102, 241, 0.8)';
                                    }
                                }
                            },
                            {
                                label: 'EMA 6',
                                 [],
                                borderColor: '#10b981',
                                borderWidth: 2,
                                pointRadius: 0,
                                borderDash: [5, 5],
                                tension: 0.3
                            },
                            {
                                label: 'EMA 25',
                                 [],
                                borderColor: '#ef4444',
                                borderWidth: 2,
                                pointRadius: 0,
                                borderDash: [5, 5],
                                tension: 0.3
                            },
                            {
                                label: 'BB Superior',
                                data: [],
                                borderColor: '#f59e0b',
                                borderWidth: 1,
                                pointRadius: 0,
                                borderDash: [3, 3],
                                tension: 0.3
                            },
                            {
                                label: 'BB Média',
                                 [],
                                borderColor: '#94a3b8',
                                borderWidth: 1,
                                pointRadius: 0,
                                borderDash: [3, 3],
                                tension: 0.3
                            },
                            {
                                label: 'BB Inferior',
                                 [],
                                borderColor: '#f59e0b',
                                borderWidth: 1,
                                pointRadius: 0,
                                borderDash: [3, 3],
                                tension: 0.3,
                                fill: {
                                    target: '-1',
                                    above: 'rgba(245, 158, 11, 0.08)'
                                }
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: 'rgba(30, 41, 59, 0.95)',
                                titleColor: '#f8fafc',
                                bodyColor: '#cbd5e1',
                                borderColor: '#334155',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: $${parseFloat(context.parsed.y).toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                                    },
                                    title: function(tooltipItems) {
                                        const date = new Date(tooltipItems[0].parsed.x);
                                        return date.toLocaleString('pt-BR', { 
                                            hour: '2-digit', 
                                            minute: '2-digit',
                                            day: '2-digit',
                                            month: '2-digit'
                                        });
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'minute',
                                    tooltipFormat: 'dd/MM HH:mm',
                                    displayFormats: {
                                        minute: 'HH:mm',
                                        hour: 'dd/MM HH:mm',
                                        day: 'dd/MM'
                                    }
                                },
                                grid: {
                                    color: 'rgba(51, 65, 85, 0.5)'
                                },
                                ticks: {
                                    maxTicksLimit: 8,
                                    color: '#94a3b8'
                                },
                                border: {
                                    color: '#334155'
                                }
                            },
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: 'rgba(51, 65, 85, 0.5)'
                                },
                                ticks: {
                                    color: '#94a3b8',
                                    callback: function(value) {
                                        return '$' + value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                                    }
                                },
                                border: {
                                    color: '#334155'
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'nearest'
                        },
                        animation: {
                            duration: 1000,
                            easing: 'easeOutQuart'
                        }
                    }
                });
            }

            updateChart() {
                if (!this.chart || !this.priceHistory[this.currentTimeframe]) return;

                const config = this.timeframeConfig[this.currentTimeframe];
                const data = this.priceHistory[this.currentTimeframe];

                if (data.length === 0) return;

                // Calcular indicadores para preencher o gráfico
                const indicators = new TechnicalIndicators(data);
                const calculations = indicators.calculateAll();

                if (!calculations) return;

                const labels = data.map(point => point.timestamp);
                const prices = data.map(point => ({ x: point.timestamp, y: point.price }));
                const ema6 = calculations.ema6.map((value, index) => ({ x: data[index].timestamp, y: value }));
                const ema25 = calculations.ema25.map((value, index) => ({ x: data[index].timestamp, y: value }));
                const bb = calculations.bbands.map((bb, index) => ({ 
                    x: data[index].timestamp, 
                    y: bb ? bb.upper : null 
                }));
                const bbMiddle = calculations.bbands.map((bb, index) => ({ 
                    x: data[index].timestamp, 
                    y: bb ? bb.middle : null 
                }));
                const bbLower = calculations.bbands.map((bb, index) => ({ 
                    x: data[index].timestamp, 
                    y: bb ? bb.lower : null 
                }));

                // Atualizar dados do gráfico
                this.chart.data.labels = labels;
                this.chart.data.datasets[0].data = prices; // Preço
                this.chart.data.datasets[1].data = ema6; // EMA 6
                this.chart.data.datasets[2].data = ema25; // EMA 25
                this.chart.data.datasets[3].data = bb; // BB Superior
                this.chart.data.datasets[4].data = bbMiddle; // BB Média
                this.chart.data.datasets[5].data = bbLower; // BB Inferior
                
                // Atualizar configuração do eixo X
                this.chart.options.scales.x.time.unit = config.timeUnit;

                // Atualizar visibilidade dos indicadores
                this.chart.data.datasets.forEach((dataset, index) => {
                    if (index > 0) { // Pular o dataset do preço
                        dataset.hidden = !this.showIndicators;
                    }
                });

                this.chart.update('none');
            }

            formatLargeNumber(num) {
                if (num >= 1e12) return (num / 1e12).toFixed(2) + 'T';
                if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
                if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
                if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
                return num.toFixed(2);
            }

            setupEventListeners() {
                // Botão de atualização
                document.getElementById('refreshBtn').addEventListener('click', async () => {
                    this.showNotification('Atualizando dados...', 'info');
                    try {
                        await this.fetchInitialData();
                        this.showNotification('Dados atualizados com sucesso!', 'success');
                    } catch (error) {
                        console.error('Erro ao atualizar:', error);
                        this.showNotification(`Erro ao atualizar: ${error.message}`, 'error');
                    }
                });

                // Toggle de indicadores
                document.getElementById('toggleIndicators').addEventListener('click', (e) => {
                    const btn = e.target.closest('.chart-btn');
                    this.showIndicators = !this.showIndicators;

                    // Atualizar estado do botão
                    if (this.showIndicators) {
                        btn.classList.add('active');
                        btn.innerHTML = '<i class="fas fa-chart-line"></i> Indicadores';
                    } else {
                        btn.classList.remove('active');
                        btn.innerHTML = '<i class="fas fa-chart-line"></i> Ocultar';
                    }

                    // Atualizar visibilidade dos indicadores no gráfico
                    this.chart.data.datasets.forEach((dataset, index) => {
                        if (index > 0) { // Pular o dataset do preço
                            dataset.hidden = !this.showIndicators;
                        }
                    });
                    this.chart.update('none');

                    this.showNotification(this.showIndicators ? 'Indicadores ativados' : 'Indicadores ocultos', 'info');
                });

                // Botões de timeframe
                document.querySelectorAll('.timeframe-btn').forEach(button => {
                    button.addEventListener('click', async (e) => {
                        // Remover classe active de todos os botões
                        document.querySelectorAll('.timeframe-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });

                        // Adicionar classe active ao botão clicado
                        e.target.classList.add('active');

                        // Atualizar timeframe atual
                        const newTimeframe = e.target.dataset.timeframe;
                        this.currentTimeframe = newTimeframe;
                        document.getElementById('chartTitle').textContent = `Gráfico de Preços - Últimos ${this.timeframeConfig[newTimeframe].label}`;

                        // Buscar dados se necessário
                        if (!this.priceHistory[newTimeframe] || this.priceHistory[newTimeframe].length === 0) {
                            try {
                                await this.fetchHistoricalData(newTimeframe);
                            } catch (error) {
                                console.error(`Erro ao buscar dados para ${newTimeframe}:`, error);
                                this.showNotification(`Erro ao buscar dados para ${newTimeframe}`, 'error');
                                return; // Não continuar se falhar
                            }
                        }

                        // Atualizar gráfico
                        this.updateChart();

                        // Calcular e exibir indicadores para o novo timeframe
                        this.calculateAndDisplayIndicators();

                        this.showNotification(`Timeframe alterado para ${this.timeframeConfig[newTimeframe].label}`, 'info');
                    });
                });

                // Toggle de tema (simulado)
                document.getElementById('themeToggle').addEventListener('click', () => {
                    this.showNotification('Tema alterado para modo claro', 'info');
                });
            }

            startAutoUpdate() {
                setInterval(async () => {
                    try {
                        await this.fetchPriceData(); // Atualiza apenas o preço principal
                        
                        // Atualizar dados do timeframe atual a cada 5 minutos aproximadamente
                        // (30s * 10 = 300s = 5min)
                        if (Math.floor(Date.now() / 1000) % 300 < 30) { 
                             await this.fetchHistoricalData(this.currentTimeframe);
                             this.calculateAndDisplayIndicators();
                             this.updateChart();
                        }
                        
                    } catch (error) {
                        console.error('Erro na atualização automática:', error);
                        // Não atualizar o status para erro aqui, pois é apenas uma tentativa
                        // O usuário pode não perceber se for um erro temporário
                    }
                }, this.updateInterval);
            }

            updateStatus(message, type) {
                const statusElement = document.getElementById('apiStatus');
                statusElement.textContent = message;
                
                statusElement.className = 'status-value';
                if (type === 'success') {
                    statusElement.classList.add('status-success');
                } else if (type === 'error') {
                    statusElement.classList.add('status-error');
                } else if (type === 'loading') {
                    statusElement.classList.add('status-warning'); // Usar warning para loading
                }
            }

            showNotification(message, type) {
                // Remover notificações antigas
                const oldNotifications = document.querySelectorAll('.notification');
                oldNotifications.forEach(n => n.remove());

                const notification = document.createElement('div');
                notification.className = `notification ${type} show`;
                notification.innerHTML = `
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
                    <div>${message}</div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
        }

        // Inicializar aplicativo quando a página carregar
        document.addEventListener('DOMContentLoaded', () => {
            new SolanaMonitor();
        });
    </script>
</body>
</html>
